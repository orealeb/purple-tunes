<!DOCTYPE html>
<html class="" lang="en">
<!-- start Mixpanel --><script type="text/javascript">(function(e,b){if(!b.__SV){var a,f,i,g;window.mixpanel=b;b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
for(g=0;g<i.length;g++)f(c,i[g]);b._i.push([a,e,d])};b.__SV=1.2;a=e.createElement("script");a.type="text/javascript";a.async=!0;a.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";f=e.getElementsByTagName("script")[0];f.parentNode.insertBefore(a,f)}})(document,window.mixpanel||[]);
mixpanel.init("30c286bf70939e9de7f46b3c58bf4e84");</script><!-- end Mixpanel -->
<head>
    <link rel='shortcut icon' href='favicon.ico' type='image/x-icon'/ >
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>Purple Tunes</title>
    <link href=
    "css/foundation.css" rel=
    "stylesheet">
    <link href=
    "css/foundation-icons.css"
    rel="stylesheet" type="text/css">
    <script src="js/vendor/jquery.js"></script>
    <script> 
        mixpanel.track("news-magazine page load");

        $(function(){
          $("#header").load("header.html"); 
          $("#footer").load("footer.html"); 
          $("#socialmedialinks").load("socialmedialinks.html");
        });
    </script> 
    <meta class="foundation-mq">
    <title>Purple Tunes</title>
</head>
  <style>

    .btn-img {
        /**width: 100px;**/
        position: relative;
        /**opacity: 0.5;**/
        transition: 0.3s ease;
        cursor: pointer;
    }

    .btn-img:hover {
        transform: scale(1.5, 1.5);
        /**opacity: 1;**/
    }

    </style>
<body>

<!-- Song Player http://playlist.me ><script type="text/javascript" src="http://playlist.me/w/script.js" data-config="{'skin':'skins/purple/skin.css','volume':50,'autoplay':false,'shuffle':false,'repeat':1,'placement':'bottom','showplaylist':false,'playlist':'https://soundcloud.com/purple-tunes/sets/naija-hits'}" ></script><noscript><a href="http://playlist.me/skins/">SCM player skins</a></noscript>< playlist.me script end -->


<script type="text/javascript">
   /** $(document).ready(function(){
      window.onload = function () {

       setTimeout(function(){

    var dataContainer = document.getElementById('player'); console.log(dataContainer); 
      alert(dataContainer);

      }, 5000);
  
  }
    }) **/
   // var dataContainer = document.getElementById('tooltip'); console.log(dataContainer);
       //dataContainer.setAttribute("style", "background-color: white !important; background-image: none !important;" );

</script>


   <div id="header"></div>


    <br>
    <div class="row" id="bannerImage">

        <div id="bigBanner" class="medium-8 columns">
            <!--p><img alt="main article image" src=
            "img/placehold/olamide.jpg"></p-->
        </div>
        <div id="smallBanner" class="medium-4 columns">
            <!--p><img alt="article promo image" src=
            "img/placehold/kissdaniel.jpg"></p>
            <p><img alt="article promo image" src=
            "img/placehold/olamide2.jpg"></p-->
        </div>

    </div>
    <hr>
    <div class="row column">
        <h4 class="text-center" style="margin: 0;">LATEST STORIES</h4>
    </div>
    <hr>
    <div class="row">
        
        <div id="divID" class="large-8 columns" style="border-right: 1px solid #E3E5E8;"> </div>
         

           <div id="socialmedialinks"></div>

            <br><br>
    </div>
     
                    <div class="large-3 columns"> <center>
                        <a href='news.html?page=1' aria-label="Prev page" style="color:purple;">More News<span class=
                        "show-for-sr">page</span></a></center>
                    </div>
                    <br><br>
       <script type="text/javascript">


        function truncate( n, useWordBoundary ){
            var isTooLong = this.length > n,
                s_ = isTooLong ? this.substr(0,n-1) : this;
                s_ = (useWordBoundary && isTooLong) ? s_.substr(0,s_.lastIndexOf(' ')) : s_;
            return  isTooLong ? s_ + '&hellip;' : s_;
        }

            /***SECTION 2 : get Data from perl script***/
        function getMusicData(pageNumber, callback) {

          console.log("get music page called");
            var requestData = "";              
            $.ajax({
                type: "GET",
                url: "https://purpletunez.herokuapp.com/api/articles/page", // URL of the Perl script
                //dataType: 'json',
                data: {
                    "pageNumber": pageNumber,
                    "pageSize":4
                },

                // script call was *not* successful
                error: function(error) {
                    console.log(error);
                },

                // script call was successful 
                success: function(news_data) {
                    console.log(news_data);
                    //alert(news_data);
                   // requestData = perl_data;
                    //convert to 2d array
                   // var jsonData = JSON.parse("[" + requestData + "]");                   
                  return callback(news_data);
                }
            });         

        }

                    /***SECTION 2 : get Data from perl script***/
        function getBannerMusicData(callback) {

            var requestData = "";              
            $.ajax({
                type: "POST",
                url: "https://purpletunez.herokuapp.com/api/articles/bannerArticle", // URL of the Perl script
                //dataType: 'json',
                data: {
                    "hasBanner": true
                },

                // script call was *not* successful
                error: function(error) {
                    console.log(error);
                },

                // script call was successful 
                success: function(news_data) {
                    console.log(news_data);
                    //alert(news_data);
                   // requestData = perl_data;
                    //convert to 2d array
                   // var jsonData = JSON.parse("[" + requestData + "]");                   
                  return callback(news_data);
                }
            });         

        }

          getBannerMusicData(function(data) {
                  console.log(data);
                   var bannerDiv=document.getElementById("bigBanner");
                   bannerDiv.innerHTML = ("<p><a href='getnews.html?id="+data[0]._id+"'><img style='width:636px; height:305px;' alt='main article image'src='"+data[0].bannerImageURL+"'></a></p>");

                   var bannerDiv2=document.getElementById("smallBanner");
                   bannerDiv2.innerHTML = ("<p><a href='getnews.html?id="+data[1]._id+"'><img style='width:303px; height:146px;' alt='main article image'src='"+data[1].imageURL+"'></a></p><p><a href='getnews.html?id="+data[2]._id+"'><img style='width: 303px; height:146px;' alt='main article image'src='"+data[2].imageURL+"'></a></p>");               
          });

          var month = new Array();
          month[0] = "January";
          month[1] = "February";
          month[2] = "March";
          month[3] = "April";
          month[4] = "May";
          month[5] = "June";
          month[6] = "July";
          month[7] = "August";
          month[8] = "September";
          month[9] = "October";
          month[10] = "November";
          month[11] = "December";

          getMusicData(1,  function(data) {

                  for (var i = 0; i < data.length; i++) {
                   var article=document.createElement("article");
                   var newDate = new Date(data[i].date);
                   article.innerHTML = ("<div class='row'><div class=large-6 columns'><p><a href='getnews.html?id="+data[i]._id+"'><img align='left'  class='btn-img'  alt='image for article' style='height: 200px; width: 400px; padding: 15px;' src='"+data[i].imageURL+"''></p> </a></div><div class='large-6 columns' ><h5> <a href='getnews.html?id="+data[i]._id+"'>"+data[i].title+"</a></h5><p></a></h5></div><span><i class='fi-calendar'> "+  month[newDate.getMonth()] + ' ' +  newDate.getDay() + ', ' +  newDate.getFullYear()   +"&nbsp;&nbsp;</i></span><p>"+  truncate.apply(data[i].text, [120, true]) +"<br> <a href='getnews.html?id="+data[i]._id+"'> More >> </a></p></div></div><hr />");

                    var dataContainer = document.getElementById('divID');
                        dataContainer.setAttribute("class", "large-8 columns");
                       dataContainer.setAttribute("style", "border-right: 1px solid #E3E5E8" );
                   dataContainer.appendChild(article);


                 }
          });




      </script>

 
</body>
<div id="footer"></div>

</html>